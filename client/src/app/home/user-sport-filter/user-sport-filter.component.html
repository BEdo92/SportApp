<div>
    <div class="container mt-3">
        <form #form="ngForm" class="d-flex mb-3" (ngSubmit)="filterData()">
            <div class="d-flex flex-column mx-2">
                <app-date-picker [(ngModel)]="sportService.sportParams.dateFrom" [label]="'Date from'">
                </app-date-picker>

                
                <app-date-picker [(ngModel)]="sportService.sportParams.dateTo" [label]="'Date to'">
                </app-date-picker>
            </div>

            <div class="d-flex flex-column mx-2">
                <label for="sportType">Sport Type</label>
                <br>
                <select [(ngModel)]="sportService.sportParams.sportType" id="sportType">
                    <option *ngFor="let sportType of sportTypes" [value]="sportType">{{ sportType }}</option>
                </select>
            </div>

            <div class="d-flex flex-column mx-2">
                <label class="col-form-label">Distance from </label>
                <input type="number" class="form-control ms-1" style="width: 70px;" name="maxAge"
                    [(ngModel)]="sportService.sportParams.distanceFrom">

                <label class="col-form-label">Distance to </label>
                <input type="number" class="form-control ms-1" style="width: 70px;" name="maxAge"
                    [(ngModel)]="sportService.sportParams.distanceTo">
            </div>


            <button class="btn btn-primary ms-1" type="submit">Apply filters</button>
            <button (click)="resetFilters()" class="btn btn-info ms-1" type="button">Reset filters</button>

            <div class="col">
                <div class="btn-group float-end">
                    <button type="button" class="btn btn-primary" name="orderBy" (click)="filterData()" btnRadio="date"
                        [(ngModel)]="sportService.sportParams.orderBy">Date</button>
                    <button type="button" class="btn btn-primary" name="orderBy" (click)="filterData()"
                        btnRadio="distance" [(ngModel)]="sportService.sportParams.orderBy">Distance</button>
                </div>
            </div>

            @if (validationErrors) {
            <div class="alert alert-danger text-start">
                <ul>
                    @for (error of validationErrors; track $index) {
                    <li>{{error}}</li>
                    }
                </ul>
            </div>
            }
        </form>

        @if (sportService.paginatedResult()?.pagination) {
        <div class="d-flex justify-content-center">
            <pagination [boundaryLinks]="true" [totalItems]="sportService.paginatedResult()?.pagination!.totalItems"
                [itemsPerPage]="sportService.paginatedResult()?.pagination!.itemsPerPage"
                (pageChanged)="pageChanged($event)" [maxSize]="10" previousText="&lsaquo;" nextText="&rsaquo;"
                firstText="&laquo;" lastText="&raquo;">
            </pagination>
        </div>
        }
    </div>

    <h6 class="card-title text-center mb-1"></h6>
    <table class="table table-striped table-bordered table-hover text-center">
        <tr>
            <th>Sport type</th>
            <th>Date</th>
            <th>Distance</th>
        </tr>
        @for (sport of sportService.paginatedResult()?.items; track sport.sportType) {
        <tr>
            <td>{{sport?.sportType}}</td>
            <td>{{sport?.date}}</td>
            <td>{{sport?.distance}}</td>
        </tr>
        }
    </table>

</div>